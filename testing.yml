config:
  target: 'http://127.0.0.1:3000'
  phases:
    - duration: 60
      arrivalRate: 1
  processor: './fakeData/artilleryFakeDataGenerator.js'    
scenarios:
  - name: 'Add a request'
    weight: 50
    flow:
      - function: 'generateFakeData'
      - loop:
        - post:
            url: "/requests"
            json:
              timeBucket: '{{ timeBucket }}'
              id: '{{ id }}'
              rate: '{{ rate }}'
              zipOrigin: '{{ zipOrigin }}'
              zipDestination: '{{ zipDestination }}'
              timestamp: '{{ timestamp }}'
              price: '{{ price }}'
              ride: '{{ ride }}'
        # - log: "Sent a request to /requests with {{ zipOrigin }}, {{ timestamp }}, {{ id }}" 
        # - log: 'Sent a request to /requests'
        count: 1000
  - name: 'Get aggregated data'
    weight: 1
    flow:
      - get:
          url: '/dataForFares'
      - log: 'Sent a request to /dataForFares'    



